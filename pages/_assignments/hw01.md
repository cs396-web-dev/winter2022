---
layout: assignment-two-column
title: Writing a Web API
abbreviation: HW1
type: homework
due_date: 2022-01-18
ordering: 1
draft: 0
points: 20
---

> {:.callout}
> ## Collaboration and Code Sharing Policy: Read Carefully
> For HW1, you are welcome to work in pairs (optional). You must still turn in your own html and css files, but you can collaborate on code and discuss code and strategies. If you collaborate, you'll just list your partner in the comments section of Canvas. 
> 
> We will be running MOSS on all assignments to ensure that everyone is doing their own work in good faith. For those who are collaborating, this is a way to be transparent about collaboration ahead of time (so if you happen get a code similarity flag via MOSS, we will ignore it). That said, please do not (a) "free ride" on your teammates or (b) enable free riders. Everyone in your group should understand every line of code they submit. 
> 
> Regarding extra credit: If you are working in a group and opt to complete the extra credit, the extra credit points will be divided among the (n) members of the group. So, the individual extra credit you earn will be:
>
> **`ec_points_individual = ec_total_points / n;`**

In this assignment, you will create an HTML / CSS version of a photo sharing app to communicate the look and feel of your app in a web browser.

<img class="frame" style="height:340px;" src="/winter2022/assets/images/hw01/hw01-desktop.gif"/> <img  class="frame" style="height:340px;" src="/winter2022/assets/images/hw01/hw01-mobile.gif"/>


## Part 1: Setup

### 1. Create two files
Create a folder called `photo-app`. Inside of it, create two files -- an HTML file called `index.html` and a CSS file called `styles.css`.

### 2. Create a new GitHub repository
Log into GitHub (and register if you do not already have an account) and create a new __private__ GitHub repository. Name it `photo-app`. Please make it private so that others cannot see your code (for academic integrity considerations). 

### 3. Connect your local files to your GitHub repository
Then, from within your `photo-app` on your command line, type the following: 

```bash
git init
git add .   # asks git to track all of the files in your folder
git commit -am "first commit"  # commit all of your files
git branch -M main  # create a new branch called main (moving away from "master" terminology in CS)   
git remote add origin <address-of-repo-on-github>
git push -u origin main
```

__NOTE:__ The above code sets up your initial repository. For any additional code changes:

1. Use `git status` to see all the files that your git repo is tracking, and which files have changed since you last committed. Note that the files listed in your .gitignore file are ignored by git.
1. Use `git add .` to ask git to track any new code files you create.
1. Use `git commit -am "my message"` to commit changes to your repository.
1. Use `git push origin main` to push changes to GitHub


### 1. Implement the following GET routes (8 Points)

<table>
    <th>
        Method/Route
        <td>Response <code>data</code> Value</td>
        <td>Response <code>data</code> Type</td>
        <td>Points</td>
    </th>
    <tr>
        <td>GET /doctors</td>
        <td>
            A list of all Doctor objects. Demo:
            <ul>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/doctors">/doctors</a>
                </li>
            </ul>
        </td>
        <td>Array&lt;Object&gt;</td>
        <td>0.5</td>
    </tr>
    <tr>
        <td>GET /doctors/:id</td>
        <td>
            The Doctor object with the specified id. Demo:
            <ul>
                <li><a href="https://cs396-hw1.herokuapp.com/doctors/d3">/doctors/d3</a></li>
                <li><a href="https://cs396-hw1.herokuapp.com/doctors/d999">/doctors/d999</a> (404)</li>
            </ul>
        </td>
        <td>Object</td>
        <td>1</td>
    </tr>
    <tr>
        <td>GET /doctors/:id/companions</td>
        <td>
            A list of the companions that travelled with the doctor with the specified id. Demo:
            <ul>
                <li><a href="https://cs396-hw1.herokuapp.com/doctors/d3/companions">/doctors/d3/companions</a></li>
                <li><a href="https://cs396-hw1.herokuapp.com/doctors/d999/companions">/doctors/d999/companions</a> (404)</li>
            </ul>
        </td>
        <td>Array&lt;Object&gt;</td>
        <td>1</td>
    </tr>
    <tr>
        <td>GET /doctors/:id/goodparent</td>
        <td>
            <i>true</i> if every companion who travelled with this doctor is alive; Otherwise, <i>false</i>. Demo:

            <ul>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/doctors/d2/goodparent">/doctors/d2/goodparent</a>
                </li>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/doctors/d5/goodparent">/doctors/d5/goodparent</a>
                </li>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/doctors/d77776/goodparent">/doctors/d77776/goodparent</a> (404)
                </li>
            </ul>
        </td>
        <td>boolean</td>
        <td>1</td>
    </tr>
    <tr>
        <td>GET /companions</td>
        <td>
            A list of all companion objects. Demo:
            <ul>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions">/companions</a>
                </li>
            </ul>
        </td>
        <td>Array&lt;Object&gt;</td>
        <td>0.5</td>
    </tr>
    <tr>
        <td>GET /companions/:id</td>
        <td>
            The companion object with the specified id. Demo:
            <ul>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions/c1_1">/companions/c1_1</a>
                </li>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions/c1_11111">/companions/c1_1111</a> (404)
                </li>
            </ul>
        </td>
        <td>Object</td>
        <td>1</td>
    </tr>
    <tr>
        <td>GET /companions/:id/doctors</td>
        <td>
            A list of the Doctors with whom this companion travelled. Demo:
            <ul>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions/c1_1/doctors">/companions/c1_1/doctors</a>
                </li>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions/c4_6__5_2/doctors">/companions/c4_6__5_2/doctors</a>
                </li>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions/c1_11111/doctors">/companions/c1_1111/doctors</a> (404)
                </li>
            </ul>
        </td>
        <td>Array&lt;Object&gt;</td>
        <td>1</td>
    </tr>
    <tr>
        <td>GET /companions/:id/friends</td>
        <td>
            A list of the companions who appeared on at least one of the same seasons as this companion. Demo:
            <ul>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions/c1_1/friends">/companions/c1_1/friends</a>
                </li>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions/c4_6__5_2/friends">/companions/c4_6__5_2/friends</a>
                </li>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions/c1_11111/friends">/companions/c1_1111/friends</a> (404)
                </li>
            </ul>
        </td>
        <td>Array&lt;Object&gt;</td>
        <td>1</td>
    </tr>
    <tr>
        <td>GET /companions/crossover</td>
        <td>
            A list of the companions who travelled with multiple doctors. Demo:
            <ul>
                <li>
                    <a href="https://cs396-hw1.herokuapp.com/companions/crossover">/companions/crossover</a>
                </li>
            </ul>
        </td>
        <td>Array&lt;Object&gt;</td>
        <td>1</td>
    </tr>
</table>

### 2. Implement POST, PATCH, and DELETE routes (5 Points)
The next set of routes involves storing and manipulating data. For now, you will accomplish this by adding and removing items from the `data` object. Since the server runs continually in the background, any changes you make to the `data` object will persist between requests, letting us simulate a database. However, the changes you make will not persist between server runs; if you restart the server, the data object will revert to its initial state.

Notice that the PATCH and DELETE methods detailed below can fail to find an object if it does not exist within `data`. In these cases, you should mark the status of the response as `404`, indicating that the requested resource could not be found.

__Note__: Receiving two POST requests with identical bodies should create two different objects with distinct ids. It's your job to figure out how to make sure that no two objects have the same `_id`. One way to do this might be to append `Date.now()` to a string identifier, since `Date.now()` will return a different value each time it is called (you could also generate a random number and use that instead).

<table>
    <th>
        Method/Route
        <td>Effect</td>
        <td>Request Body</td>
        <td>Response <code>data</code> Value</td>
        <td>Response <code>data</code> Type</td>
        <td>Points</td>
    </th>
    <tr>
        <td>POST /doctors</td>
        <td>Create a new Doctor object and store it. You must create a new unique identifier for the object, which you should send back to the client (as part of the Doctor object).</td>
        <td>{ name: string, seasons: Array&lt;number&gt; }</td>
        <td>The new Doctor (including the _id)</td>
        <td>Object</td>
        <td>1</td>
    </tr>
    <tr>
        <td>POST /companions</td>
        <td>Create a new companion object and store it. You must create a new unique identifier for the object, which you should send back to the client (as part of the Companion object).</td>
        <td>{ name: string, character: string, doctors: Array&lt;number&gt;, seasons: Array&lt;number&gt;, alive: boolean }</td>
        <td>The new Companion (including the _id)</td>
        <td>Object</td>
        <td>1</td>
    </tr>
    <tr>
        <td>PATCH /doctors/:id</td>
        <td>Update the fields of the Doctor object with the specified id to match the fields in the request body. If a field is not present in the request body, leave it untouched in the Doctor object.</td>
        <td>{ name: string, seasons: Array&lt;number&gt; }</td>
        <td>The updated Doctor</td>
        <td>Object</td>
        <td>1</td>
    </tr>
    <tr>
        <td>PATCH /companions/:id</td>
        <td>Update the fields of the companion object with the specified id to match the fields in the request body. If a field is not present in the request body, leave it untouched in the companion object.</td>
        <td>{ name: string, character: string, doctors: Array&lt;number&gt;, seasons: Array&lt;number&gt;, alive: boolean }</td>
        <td>The updated Companion</td>
        <td>Object</td>
        <td>1</td>
    </tr>
    <tr>
        <td>DELETE /doctors/:id</td>
        <td>Delete the entry for the Doctor with the specified id.</td>
        <td>N/A</td>
        <td>null</td>
        <td>null</td>
        <td>0.5</td>
    </tr>
    <tr>
        <td>DELETE /companions/:id</td>
        <td>Delete the entry for the companion with the specified id.</td>
        <td>N/A</td>
        <td>null</td>
        <td>null</td>
        <td>0.5</td>
    </tr>
</table>

## Extra Credit (Up to 3 points)

If you have the time (or need to make up a missing lab or something), you can earn extra credit by setting up a favorites system in which a user can save their favorite Doctors and companions to find again later. Feel free to use whatever data structure(s) you feel appropriate to create your favorites "database". Return 404 HTTP status codes for the POST and DELETE requests if the entry with the specified `_id` does not exist.

<table>
    <th>
        Method/Route
        <td>Effect</td>
        <td>Request Body</td>
        <td>Response <code>data</code> Value</td>
        <td>Response <code>data</code> Type</td>
        <td>Points</td>
    </th>
    <tr>
        <td>GET /doctors/favorites</td>
        <td>Return a list of saved Doctor objects.</td>
        <td>N/A</td>
        <td>A list of saved Doctor objects.</td>
        <td>Array&lt;Object&gt;</td>
        <td>0.5</td>
    </tr>
    <tr>
        <td>GET /companions/favorites</td>
        <td>Return a list of saved companion objects.</td>
        <td>N/A</td>
        <td>A list of saved companion objects.</td>
        <td>Array&lt;Object&gt;</td>
        <td>0.5</td>
    </tr>
    <tr>
        <td>POST /doctors/favorites</td>
        <td>Add the Doctor with the specified id to the user's favorites.</td>
        <td>{ id: Number }</td>
        <td>The corresponding Doctor</td>
        <td>Object</td>
        <td>0.5</td>
    </tr>
    <tr>
        <td>POST /companions/favorites</td>
        <td>Add the companion with the specified id to the user's favorites.</td>
        <td>{ id: Number }</td>
        <td>The Companion who was just added to favorites</td>
        <td>Object</td>
        <td>0.5</td>
    </tr>
    <tr>
        <td>DELETE /doctors/favorites/:id</td>
        <td>Delete the Doctor with the specified id from the user's favorites.</td>
        <td>N/A</td>
        <td>null</td>
        <td>null</td>
        <td>0.5</td>
    </tr>
    <tr>
        <td>DELETE /companions/favorites/:id</td>
        <td>Delete the companion with the specified id from the user's favorites.</td>
        <td>N/A</td>
        <td>null</td>
        <td>null</td>
        <td>0.5</td>
    </tr>
</table>

## What to Turn In

Before you submit, please make sure you've completed the steps listed:

{:.checkbox-list}
* __[13 points]__ You have implemented all of the required API endpoints listed in Part 3.
* You have created a __private__ repository and checked in all of your code to main.
* __[2 points]__ You have deployed your code to Heroku.
* You have verified that all of the tests pass with the Heroku instance of your code (recommended). To verify this:
   * Open the `test/util/testUtil.js` folder
   * Edit the endpoint so that instead of pointing to `http://localhost:8081` it points to your Heroku instance.
   * run the Mocha tests: `npm test`

When you're done, you should submit the following to Canvas:

1. A zip file that contains only your completed routes.js file (since Canvas does not allow users to upload a raw .js file). Please name it `routes.js.zip`
1. A link to your live Heroku web server (just paste the link in as a comment on Canvas).
1. A list of your collaborators, if applicable (just list them in the comments section of Canvas).
