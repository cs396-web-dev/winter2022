---
layout: assignment-two-column
title: "PhotoApp: Client-Side Templating with JavaScript"
abbreviation: HW4
type: homework
due_date: 2022-02-15
ordering: 4
draft: 1
points: 25
---
<style>
    /* table.rubric th:last-child {
        width: 85px;
    } */
    table.rubric th:nth-child(1), 
    table.rubric td:nth-child(1), 
    table.rubric th:nth-child(4), 
    table.rubric td:nth-child(4) {
        width: 80px !important;
        min-width: 80px !important;
    }

    .fa-heart, .fa-bookmark {
        margin-left: 8px;
    }
    figcaption {
        padding-top: 85px;
        margin-top: -70px;
        font-family: "Campton Book",Tahoma,sans-serif;
        color: #4e2a84;
        font-size: 1.1em;
    }

    
</style>

## 1. Introduction

## 2. Set Up (Optional)
For this assignment, you're welcome to write all of your code from scratch and not use any of the templates. That said, if it is helpful to you

1. Configure the API Tester
    * `app.py`
    * `static/api`
    * new model

2. Update the Post model and the `views/posts.py` endpoint
    * Describe changes

3. Note the structure of the `index.html` file (which will be populated using JavaScript).

## 3. Your Tasks
Please complete the following tasks. Feel free to use the <a href="https://photo-app-demo.herokuapp.com/api" target="_blank">API tester</a> that we made to help you. 

{:.blockquote-no-margin}
> **OPTIONAL**
>
> If you want to configure the API tester to work on your version of your flask app, please follow <a href="https://photo-app-demo.herokuapp.com/api" target="_blank">these instructions</a>.

### 1. Page Initialization Tasks (10 Points)
The functionality in this section must be invoked when the page first loads (so that the user sees each of these panels right away). Note that the navigation panel will still be rendered by a server-side include.

<table class="rubric">
    <thead>
        <tr>
            <th>Points</th>
            <th>Task</th>
            <th>Description</th>
            <th>Figure</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1pt</td>
            <td>
                Suggestions Panel: User Profile
            </td>
            <td>
                Render an HTML representation of the current user's profile using data from the <code class="highlighter-rouge">/api/profile</code> endpoint.
            </td>
            <td><a href="#fig2">Figure 2</a></td>
        </tr>
        <tr>
            <td>2pts</td>
            <td>Suggestions Panel: Suggestions List</td>
            <td>
                Render an HTML representation of suggested user accounts using data from the <code class="highlighter-rouge">/api/suggestions</code> endpoint.
            </td>
            <td><a href="#fig3">Figure 3</a></td>
        </tr>
        <tr>
            <td>2pts</td>
            <td>Stories Panel</td>
            <td>
                Render an HTML representation of stories from the user's network using data from the <code class="highlighter-rouge">/api/stories</code> endpoint.
            </td>
            <td><a href="#fig4">Figure 4</a></td>
        </tr>
        <tr>
            <td>5pts</td>
            <td>Posts Panel</td>
            <td>
                Render an HTML representation of the first 10 posts from the user's network using data from the <code class="highlighter-rouge">/api/posts</code> endpoint. Please ensure that the following rules are honored:
                <ul class="checkbox-list">
                    <li>
                        If there is more than one comment associated with the post, display a “view all n comments” button and the first post below it (replace n by the actual number of comments). Otherwise, display a single comment below the title of the post (if one exists).
                    </li>
                    <li>If the current user has already liked the post, the heart icon should be red <i style="color: #F00" class="fas fa-heart"></i>. Otherwise it should be hollow <i class="far fa-heart"></i>.</li>
                    <li>If the current user has already bookmarked the post, the bookmark icon should be black <i class="fas fa-bookmark"></i>. Otherwise it should be hollow <i class="far fa-bookmark"></i>.</li>
                </ul>
            </td>
            <td><a href="#fig5">Figure 5</a></td>
        </tr>
    </tbody>
</table>

Note that the content from each box should be generated from the API data (no hard-coding).

<figure>
    <figcaption id="fig2">Figure 2: User Profile</figcaption>
    <img class="screenshot" alt="screen shot of the stories panel" style="width:30%;" src="/winter2022/assets/images/homework/hw04/a.png"/>
</figure>

<figure>
    <figcaption id="fig3">Figure 3: Suggestions</figcaption>
    <img class="screenshot" alt="screen shot of the stories panel" style="width:30%;" src="/winter2022/assets/images/homework/hw04/b.png"/>
</figure>

<figure>
    <figcaption id="fig4">Figure 4: Stories</figcaption>
    <img class="screenshot" alt="screen shot of the stories panel" style="width:75%;" src="/winter2022/assets/images/homework/hw04/c.png"/>
</figure>

<figure>
    <figcaption id="fig5">Figure 5: Post</figcaption>
    <img class="screenshot" alt="screen shot of the post panel" style="width:75%;" src="/winter2022/assets/images/homework/hw04/d.png"/>
</figure>


### 2. Create / Delete Data with Event Handlers (15 Points)

<table class="rubric">
    <thead>
        <tr>
            <th>Points</th>
            <th>Task</th>
            <th>Description</th>
            <th>Figure</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>2pts</td>
            <td>
                Like Post
            </td>
            <td>
                <ul class="checkbox-list">
                    <li>
                        When the user clicks the heart of "unliked" post, a POST request is issued to the <code class="highlighter-rouge">/api/posts/&lt;post_id&gt;/likes/</code> endpoint.
                    </li>
                    <li>If the POST response indicates success, redraw the post to indicate that the post has been liked. Ensure that the number of likes is updated.</li>
                </ul>
            </td>
            <td><a href="#fig6">Figure 6</a></td>
        </tr>
        <tr>
            <td>2pts</td>
            <td>
                Unlike Post
            </td>
            <td>
                <ul class="checkbox-list">
                    <li>
                        When the user clicks the heart of "liked" post, a DELETE request is issued to the <code class="highlighter-rouge">/api/posts/&lt;post_id&gt;/likes/&lt;id&gt;</code> endpoint.
                    </li>
                    <li>If the DELETE response indicates success, redraw the post to indicate that the post has been unliked. Ensure that the number of likes is updated.</li>
                </ul>
            </td>
            <td><a href="#fig6">Figure 6</a></td>
        </tr>
        <tr>
            <td>2pts</td>
            <td>
                Bookmark Post
            </td>
            <td>
                <ul class="checkbox-list">
                    <li>
                        When the user clicks the bookmark button of "unbookmarked" post, a POST request is issued to the <code class="highlighter-rouge">/api/bookmarks/</code> endpoint.
                    </li>
                    <li>If the POST response indicates success, redraw the post to indicate that the post has been bookmarked.</li>
                </ul>
            </td>
            <td><a href="#fig7">Figure 7</a></td>
        </tr>
        <tr>
            <td>2pts</td>
            <td>
                Unbookmark Post
            </td>
            <td>
                <ul class="checkbox-list">
                    <li>
                        When the user clicks the bookmark button of an "unbookmarked" post, a DELETE request is issued to the <code class="highlighter-rouge">/api/bookmarks/&lt;id&gt;</code> endpoint.
                    </li>
                    <li>If the DELETE response indicates success, redraw the post to indicate that the post has been unbookmarked.</li>
                </ul>
            </td>
            <td><a href="#fig7">Figure 7</a></td>
        </tr>
        <tr>
            <td>2pts</td>
            <td>
                Follow Account
            </td>
            <td>
                <ul class="checkbox-list">
                    <li>
                        When the user clicks the follow button of an "unfollowed" account, a POST request is issued to the <code class="highlighter-rouge">/api/following</code> endpoint.
                    </li>
                    <li>If the POST response indicates success, redraw the button to indicate that you are now following the account.</li>
                </ul>
            </td>
            <td><a href="#fig8">Figure 8</a></td>
        </tr>
        <tr>
            <td>2pts</td>
            <td>
                Unfollow Account
            </td>
            <td>
                <ul class="checkbox-list">
                    <li>
                        When the user clicks the unfollow button of an "followed" account, a DELETE request is issued to the <code class="highlighter-rouge">/api/following/&lt;id&gt;</code> endpoint.
                    </li>
                    <li>If the DELETE response indicates success, redraw the button to indicate that you are no longer following the account.</li>
                </ul>
            </td>
            <td><a href="#fig8">Figure 8</a></td>
        </tr>
        <tr>
            <td>3pt</td>
            <td>
                Add a Comment
            </td>
            <td>
                <ul class="checkbox-list">
                    <li>
                        When the user types a comment into the textbox and clicks the adjacent "post" button, a POST request is issued to the <code class="highlighter-rouge">/api/comments</code> endpoint.
                    </li>
                    <li>If the POST response indicates success, redraw the entire post to display the new comment.</li>
                    <li>Ensure that the new comment is rendered to the screen and that the comment count increases to reflect the # of comments associated with the post.</li>
                </ul>
            </td>
            <td><a href="#fig9">Figure 9</a></td>
        </tr>
    </tbody>
</table>

<figure>
    <figcaption id="fig6">Figure 6: Liking and Unliking</figcaption>
    <p>Note that each button click is issuing a request to your API and redrawing the screen (console messages just used for demonstration purposes).</p>
    <img class="screenshot frame" alt="screen shot of the post panel" style="width:50%;" src="/winter2022/assets/images/homework/hw04/like.gif"/>
</figure>

<figure>
    <figcaption id="fig7">Figure 7: Bookmarking and Unbookmarking</figcaption>
    <p>Note that each button click is issuing a request to your API and redrawing the screen (console messages just used for demonstration purposes).</p>
    <img class="screenshot frame" alt="screen shot of the post panel" style="width:50%;" src="/winter2022/assets/images/homework/hw04/bookmark.gif"/>
</figure>

<figure>
    <figcaption id="fig8">Figure 8: Following and Unfollowing</figcaption>
    <p>Note that each button click is issuing a request to your API and redrawing the screen (console messages just used for demonstration purposes).</p>
    <img class="screenshot frame" alt="screen shot of the post panel" style="width:80%;" src="/winter2022/assets/images/homework/hw04/following.gif"/>
</figure>

<figure>
    <figcaption id="fig9">Figure 9: Add Comment</figcaption>
    <p>Note that each button click is issuing a request to your API and redrawing the screen (console messages just used for demonstration purposes).</p>
    <img class="screenshot frame" alt="screen shot of the post panel" style="width:80%;" src="/winter2022/assets/images/homework/hw04/commenting.gif"/>
</figure>


### 3. Post Detail Modal (5 Points)
Finally, you will make a modal window that displays a more detailed representation of the post.

{:.checkbox-list}
* Clicking on the "View all X comments" button will open up the modal box, and display the image on the left, and all of the comments on the right (as pictured)
    * 2 points for the layout
    * 2 point for successful implementation of event handler
* Clicking the close button will close the modal window.
    * 1 point for successful implementation of the "close button" event handler

<figure>
    <figcaption id="fig5">Figure 10: Post Detail in Modal Box</figcaption>
    <p>Note: in this example, the picture changes because of the way that picsum.photos works. Just ignore that for now</p>
    <img class="screenshot frame" alt="screen shot of the post panel" style="width:75%;" src="/winter2022/assets/images/homework/hw04/post-detail.gif"/>
</figure>

### 4. Accessibility Features

{:.checkbox-list}
* Ensure that all of the buttons are tabbable, and that the the corresponding event handlers can be triggered using the "spacebar" or "enter / return" key.
    * Hint: if you use the `<button></button>` element for all of your buttons, you get this functionality for free.
* Use the 'aria-label' and 'aria-checked' attributes to indicate whether a button is turned off or on (e.g. liked or unliked, following or not following, bookmarked or not bookmarked).
* Ensure that the close button of the modal box (for the post detail) has an aria label.
* Focus





Accessibility resources page updated (ARIA).

What resources did you use and did you find any additional resources that we should add in the doc?

Explore what's there.

## 4. What to Turn In