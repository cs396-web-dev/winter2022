---
layout: assignment-two-column
title: "PhotoApp: Server-Side Templates with Flask"
abbreviation: HW2
type: homework
due_date: 2022-01-25
ordering: 2
draft: 1
points: 20
---

<style>
    .screenshot {
        display: block;
        margin-left: auto;
        margin-right: auto;
        border: solid 1px #ccc;
    }   
</style>

A few quick notes and guidelines:
* The collaboration and code sharing policy is the same as [HW1](hw01).
* Feel free to use the Lab 2 solutions and lecture files as a guide.

## 1. Introduction
In this assignment, you will be doing three things: 
1. Converting the static HTML file that you made in HW1 into a data-driven, server-side template.
2. Creating some routes that serve JSON data, in preparation for HW3 (building a REST API).
3. Doing a few more design checks to ensure your site is accessible.

As we saw in [Lab 2](lab02), the Jinja templates (used by flask) allow python logic to be evaluated from within the HTML template, using a set of template variables and expressions (see <a href="https://jinja.palletsprojects.com/en/3.0.x/templates/" target="_blank">Jinja documentation</a>). This allows you to create custom, server-generated HTML files that merge with relevant data. For this lab, we will be working with fake data, generated using the `faker` python module. In HW3, we will be connecting to a database.
* **Pro Tip:** For those of you who plan to take more prototyping courses after this one, `faker` is a great way to create fake data for testing and prototyping.

## 2. Background Readings
* Some flask resources and accessibility resources here

## 3. Setup

### 1. Organize files
1. Download the `hw02.zip` file, unzip it, and copy the contents of the hw02 folder into your existing `photo-app` folder (from HW1).
1. Move the `index.html` file that you created in HW1 into the `templates` directory.
1. Move the `style.css` file that you created in HW1 into the `static` directory.
1. Inside of the `head` section of your `index.html` file, update the address of your `style.css` as follows: `href="/static/style.css"`. 

When you're done, your file system should look like this:

```bash
photo-app
├── .git                        # your local git repo (that you created for HW1)
├── Procfile
├── README.md
├── app.py
├── fake_data.py
├── requirements.txt
├── static
│   ├── starter_style.css
│   └── style.css               # your CSS file from HW1
└── templates
    ├── index.html              # your HTML file from HW1
    └── starter_template.html
```

### 2. Configure and run your flask server
Please install the dependencies:
```bash
pip3 install -r requirements.txt

# If the above command doesn't work, try one of the commands below (however you did it for lab2):
# py -m pip install -r requirements.txt
# python3 -m pip install -r requirements.txt
# python -m pip install -r requirements.txt
```

Next, set your environment variables and run your local server:

#### Mac or Linux
```bash
# set environment variables (you just have to do this once per session)
export FLASK_APP=app.py     
export FLASK_ENV=development

# then run flask (type Ctrl+C to quit)
flask run
```

#### Windows
```bash
# set environment variables (you just have to do this once per session)
set FLASK_APP=app.py
set FLASK_ENV=development

# then run flask (type Ctrl+C to quit)
flask run
# alternative commands to try if "flask run" doesn't work:
# py -m flask run
# python3 -m flask run
# python -m flask run
```

You should see the following output:
```bash
 * Serving Flask app "app.py" (lazy loading)
 * Environment: development
 * Debug mode: on
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 273-580-071
 ```


### 3. Get oriented with the files
With your flask server running, navigate to <a href="http://127.0.0.1:5000/" target="_blank">http://127.0.0.1:5000/</a> in your web browser and take a look at the web page. Currently, there is very little HTML formatting on the page (pictured below), but it is showing you some python dictionaries / lists of dictionaries. Each time you refresh your page, this data will change (as it is generated on-the-fly using `faker`).

<img class="frame medium" src="/winter2022/assets/images/homework/hw02/a.png"/>

Now, open your `templates/starter_template.html` file and `app.py` and take a look at them. See if you can figure out how the data are generated, and how the template is able to access this data.

Finally, modify the `home` function in your `app.py` file so that it merges with the `templates/index.html` file instead of `templates/starter_template.html`. Now, when you access <a href="http://127.0.0.1:5000/" target="_blank">http://127.0.0.1:5000/</a> (the root of your website), you should see the same file you submitted in HW1.

## 3. Your Tasks
Using `starter_template.html` and the lab 2 solutions as a guide, please complete the following tasks:

{:#navbar}
### 1. Navigation Bar (2 points)

{:.checkbox-list}
* Convert your navbar to an include file:
    * Create a new folder inside the `templates` folder called `includes`
    * Inside `includes`, create a file called `navbar.html` 
    * Paste the HTML responsible for the navbar into `navbar.html`å
    * In `index.html` file, replace the navbar HTML code with an <a href="https://jinja.palletsprojects.com/en/3.0.x/templates/#include" target="_blank">include tag</a> that references `includes/navbar.html`
* Modify your `navbar.html` file so that it displays the current user's username (using the `user` data from the template's context)

<img class="screenshot" style="width:70%;" src="/winter2022/assets/images/homework/hw02/navbar.png"/>

{:#suggestions}
### 2. Suggestions Panel (4 points)

{:.checkbox-list}
* Convert the suggestions panel into an include file called `suggestions.html` (just like you did with the navigation bar)
* Within `suggestions.html`, ensure that all of the hardcoded content is replaced by data stored in the `suggestions` and `user` context variables. Specifically:
    * The current user's username and profile pic should come from `user`
    * Each suggested user account should be displayed by looping through the `suggestions` list. See the <a href="https://jinja.palletsprojects.com/en/3.0.x/templates/" target="_blank">Jinja documentation</a> for some examples of how to loop through data. There's also a sample in the lab02 solutions.

<img class="screenshot" style="width:40%;" src="/winter2022/assets/images/homework/hw02/b.png"/>

{:#stories}
### 3. Stories Panel (2 points)

{:.checkbox-list}
* Convert the stories panel into an include file called `stories.html`
* Within `stories.html`, ensure that all of the hardcoded images and usernames are replaced by data stored in the `stories` context variable. You will need to use a loop.

<img class="screenshot" style="width:75%;" src="/winter2022/assets/images/homework/hw02/stories.png"/>

{:#cards}
### 4. Cards Panel (6 points)

{:.checkbox-list}
* Convert the cards panel into an include file called `cards.html`
* Within `cards.html`, ensure that all of the hardcoded posts, comments, images, etc. are replaced by the data stored in the `posts` context variable. 

Hint: You will need to use nested loops to loop through each post, and through the comment of each post.

<img class="screenshot" style="width:75%;" src="/winter2022/assets/images/homework/hw02/d.png"/>

{:#github}
### 5. GitHub (1 point)
When you're done, please commit all of your changes and push them to your `photo-app` GitHub repo.

### 6. Accessibility
Next steps re: accessibility:
* Making sure your website makes sense w/o CSS
* Load times.
* Turn off images and see if the site is coherent.
* Download the <a href="https://wave.webaim.org/extension/">WAVE Extension</a> using either Firefox or Chrome.

-- Use one of the automated testing resources and take a screenshot, submit it, and address issues or talk about how you would.



## 4. What to Turn In
You're going to turn in your different submissions in 2 parts:
1. Code in 1 submission
2. Github screenshot and answers to accessibility questions

When you're done, your file structure should look something like this (though you are welcome to include additional files if you wish):

```bash
photo-app
├── .git
├── Procfile
├── README.md
├── app.py
├── fake_data.py
├── requirements.txt
├── static
|   ├── starter_style.css
│   └── style.css
└── templates
    ├── includes
    │   ├── navbar.html
    │   ├── post.html
    │   ├── stories.html
    │   └── suggestions.html
    ├── index.html
    └── starter_template.html
```

Please consult the rubric below to ensure you have met the requirements for this assignment (all of the tasks with checkmarks next to them):

<table class="small">
    <thead>
        <tr>
            <th>Component / Task</th>
            <th>Subtasks</th>
            <th>Points</th>
        </tr>
    </thead>
    <tr>
        <th>Nav Bar</th>
        <td>
            <a href="#navbar">2 requirements</a>
        </td>
        <td>2</td>
    </tr>
    <tr>
        <th>Suggestions Panel</th>
        <td>
            <a href="#suggestions">2 requirements</a>
        </td>
        <td>4</td>
    </tr>
    <tr>
        <th>Stories Panel</th>
        <td>
            <a href="#stories">2 requirements</a>
        </td>
        <td>2</td>
    </tr>
    <tr>
        <th>Cards Panel</th>
        <td>
            <a href="#card">2 requirements</a>
        </td>
        <td>6</td>
    </tr>
    <tr>
        <th>Accessibility</th>
        <td>
            <a href="#accessibility">3 requirements</a>
        </td>
        <td>3</td>
    </tr>
    <tr>
        <th>GitHub</th>
        <td>
            <a href="#github">1 requirement</a>
        </td>
        <td>1</td>
    </tr>
    <tfoot>
        <tr>
            <th></th>
            <th>Total</th>
            <th>25</th>
        </tr>
    </tfoot>
</table>

Then, when you're done, please submit a zipped folder (<a href="https://canvas.northwestern.edu/courses/157233/assignments/1007941" target="_blank">on Canvas</a>) called `hw02.zip` that contains all of the files you used to complete your project (feel free to just zip your entire photo-app folder). Your directory structure should look similar to this one:
```bash
photo-app
├── .git
├── Procfile
├── README.md
├── app.py
├── fake_data.py
├── requirements.txt
├── static
│   └── style.css
└── templates
    ├── includes
    │   ├── navbar.html
    │   ├── post.html
    │   ├── stories.html
    │   └── suggestions.html
    └── index.html
```

Please also include a screenshot of your `photo-app` repository on GitHub. Otherwise, we won't be able to see it (since it's private).

If you collaborated with a partner, please name your partner as a comment on Canvas. To to this, after you submitted, please click the "Submission Details" link and add a note in the "Add a Comment" section.